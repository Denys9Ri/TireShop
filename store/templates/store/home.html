{% extends 'store/base.html' %}
{% load static %}

{% block title %}–®–∏–Ω–∏ R16.com.ua ‚Äî –ö—É–ø–∏—Ç–∏ —à–∏–Ω–∏ –≤ –ö–∏—î–≤—ñ | –ú–∞–≥–∞–∑–∏–Ω –≥—É–º–∏{% endblock %}
{% block meta_description %}–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —à–∏–Ω R16. –í–µ–ª–∏—á–µ–∑–Ω–∏–π –≤–∏–±—ñ—Ä –∑–∏–º–æ–≤–æ—ó —Ç–∞ –ª—ñ—Ç–Ω—å–æ—ó –≥—É–º–∏. üöö –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ. üí∞ –ù–∏–∑—å–∫—ñ —Ü—ñ–Ω–∏.{% endblock %}

{% block content %}
<style>
    /* --- HERO BANNER --- */
    .hero-section {
        position: relative;
        background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.7)), url('{% static "images/hero-bg.jpg" %}');
        background-size: cover;
        background-position: center;
        background-color: #343a40; 
        padding: 60px 0 100px 0;
        border-radius: 0 0 30px 30px;
        margin-bottom: 40px;
        color: white;
        text-align: center;
    }
    .hero-title { font-weight: 800; font-size: 2.5rem; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
    .hero-subtitle { font-size: 1.1rem; opacity: 0.9; margin-bottom: 60px; max-width: 600px; margin-left: auto; margin-right: auto; }

    .main-search-container { max_width: 1000px; margin: 0 auto; }
    .glass-search-box {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        text-align: left;
    }

    .season-selector { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
    .season-selector input[type="radio"] { display: none; }
    .season-label {
        background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); color: white;
        padding: 8px 20px; border-radius: 50px; font-weight: 600; font-size: 0.95rem;
        backdrop-filter: blur(5px); transition: 0.3s; cursor: pointer; display: flex; align-items: center; gap: 6px;
    }
    .season-label:hover { background: rgba(255,255,255,0.3); transform: translateY(-2px); }
    .season-selector input[type="radio"]:checked + .season-label {
        background: #ffffff; color: #333; border-color: #ffffff; box-shadow: 0 0 15px rgba(255,255,255,0.5); transform: scale(1.05);
    }

    .form-label-custom { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; color: #6c757d; margin-bottom: 5px; display: block; }
    .form-select-lg-custom { height: 48px; font-weight: 600; border: 2px solid #e9ecef; border-radius: 10px; font-size: 0.95rem; cursor: pointer; transition: 0.2s; padding-top: 5px; padding-bottom: 5px; }
    .form-select-lg-custom:focus { border-color: #0d6efd; box-shadow: 0 0 0 4px rgba(13, 110, 253, 0.1); }
    .btn-search-main { height: 48px; font-size: 1.1rem; font-weight: 700; border-radius: 10px; width: 100%; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 10px 20px rgba(13, 110, 253, 0.3); }

    @media (min-width: 768px) {
        .hero-section { padding: 80px 0 120px 0; }
        .hero-title { font-size: 3.5rem; }
        .glass-search-box { padding: 30px; }
        .season-label { padding: 10px 30px; font-size: 1rem; }
    }
    
    /* üî• –ö–ê–†–¢–ö–ê –¢–û–í–ê–†–£ (–û–ù–û–í–õ–ï–ù–û –î–õ–Ø –Ü–î–ï–ù–¢–ò–ß–ù–û–°–¢–Ü –ó –ö–ê–¢–ê–õ–û–ì–û–ú) üî• */
    .product-card {
        background: white; border-radius: 16px; padding: 12px; border: 1px solid #f0f0f0;
        transition: transform 0.2s, box-shadow 0.2s; height: 100%; display: flex; flex-direction: column; position: relative;
    }
    .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.08); border-color: #e0e0e0; }
    .product-img { width: 100%; height: 160px; object-fit: contain; margin-bottom: 10px; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.05)); }
    .season-badge {
        position: absolute; top: 10px; right: 10px; width: 32px; height: 32px; border-radius: 50%;
        display: flex; align-items: center; justify-content: center; z-index: 2; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .price-block { margin-top: auto; }
    
    .brand-pill { display: inline-flex; align-items: center; justify-content: center; background: white; border: 1px solid #dee2e6; border-radius: 12px; padding: 10px 20px; height: 60px; min-width: 100px; transition: 0.2s; text-decoration: none; color: #333; font-weight: bold; }
    .brand-pill:hover { border-color: #0d6efd; box-shadow: 0 5px 15px rgba(13, 110, 253, 0.1); transform: translateY(-2px); }
    .brands-scroller { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 60px; }
</style>

<div class="hero-section">
    <div class="container">
        <h1 class="hero-title">–¢–≤—ñ–π —Ä–æ–∑–º—ñ—Ä. –¢–≤–æ—è –≥—É–º–∞.</h1>
        <p class="hero-subtitle">–®–≤–∏–¥–∫–∏–π –ø—ñ–¥–±—ñ—Ä —à–∏–Ω –≤—ñ–¥ —Å–≤—ñ—Ç–æ–≤–∏—Ö –±—Ä–µ–Ω–¥—ñ–≤</p>

        <div class="main-search-container">
            <form action="{% url 'store:catalog' %}" method="get">
                <div class="season-selector">
                    <input type="radio" name="season" value="" id="s_all" checked>
                    <label for="s_all" class="season-label"><i class="bi bi-grid-fill"></i> –í—Å—ñ</label>
                    <input type="radio" name="season" value="winter" id="s_winter">
                    <label for="s_winter" class="season-label"><i class="bi bi-snow"></i> –ó–∏–º–∞</label>
                    <input type="radio" name="season" value="summer" id="s_summer">
                    <label for="s_summer" class="season-label"><i class="bi bi-sun-fill"></i> –õ—ñ—Ç–æ</label>
                    <input type="radio" name="season" value="all-season" id="s_allseason">
                    <label for="s_allseason" class="season-label"><i class="bi bi-brightness-alt-high"></i> –í—Å–µ—Å–µ–∑–æ–Ω</label>
                </div>

                <div class="glass-search-box">
                    <div class="row g-2 align-items-end">
                        <div class="col-6 col-md-2">
                            <label class="form-label-custom">–®–∏—Ä–∏–Ω–∞</label>
                            <select name="width" class="form-select form-select-lg-custom">
                                <option value="">–í—Å—ñ</option>
                                {% for w in all_widths %}<option value="{{ w }}">{{ w }}</option>{% endfor %}
                            </select>
                        </div>
                        <div class="col-6 col-md-2">
                            <label class="form-label-custom">–ü—Ä–æ—Ñ—ñ–ª—å</label>
                            <select name="profile" class="form-select form-select-lg-custom">
                                <option value="">–í—Å—ñ</option>
                                {% for p in all_profiles %}<option value="{{ p }}">{{ p }}</option>{% endfor %}
                            </select>
                        </div>
                        <div class="col-6 col-md-2">
                            <label class="form-label-custom">–î—ñ–∞–º–µ—Ç—Ä</label>
                            <select name="diameter" class="form-select form-select-lg-custom">
                                <option value="">–í—Å—ñ</option>
                                {% for d in all_diameters %}<option value="{{ d }}">R{{ d }}</option>{% endfor %}
                            </select>
                        </div>
                        <div class="col-6 col-md-3">
                            <label class="form-label-custom">–ë—Ä–µ–Ω–¥</label>
                            <select name="brand" class="form-select form-select-lg-custom">
                                <option value="">–í—Å—ñ –±—Ä–µ–Ω–¥–∏</option>
                                {% for b in brands %}<option value="{{ b.id }}">{{ b.name }}</option>{% endfor %}
                            </select>
                        </div>
                        <div class="col-12 col-md-3 mt-3 mt-md-0">
                            <button type="submit" class="btn btn-primary btn-search-main"><i class="bi bi-search"></i> –ó–Ω–∞–π—Ç–∏</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="container">
    <div class="row g-3 mb-5 justify-content-center text-center">
        <div class="col-6 col-md-3"><div class="p-3 border rounded-4 bg-light h-100"><div class="fs-1 text-primary mb-2"><i class="bi bi-truck"></i></div><div class="fw-bold">–®–≤–∏–¥–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∞</div></div></div>
        <div class="col-6 col-md-3"><div class="p-3 border rounded-4 bg-light h-100"><div class="fs-1 text-success mb-2"><i class="bi bi-shield-check"></i></div><div class="fw-bold">–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –≥–∞—Ä–∞–Ω—Ç—ñ—è</div></div></div>
        <div class="col-6 col-md-3"><div class="p-3 border rounded-4 bg-light h-100"><div class="fs-1 text-warning mb-2"><i class="bi bi-star-fill"></i></div><div class="fw-bold">–¢—ñ–ª—å–∫–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª</div></div></div>
        <div class="col-6 col-md-3"><div class="p-3 border rounded-4 bg-light h-100"><div class="fs-1 text-danger mb-2"><i class="bi bi-arrow-repeat"></i></div><div class="fw-bold">–õ–µ–≥–∫–µ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è</div></div></div>
    </div>

    <div class="d-flex justify-content-between align-items-end mb-4">
        <h2 class="h2 fw-bold mb-0">–•—ñ—Ç–∏ –ø—Ä–æ–¥–∞–∂—É üî•</h2>
        <a href="{% url 'store:catalog' %}" class="text-decoration-none fw-bold">–í–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥ <i class="bi bi-arrow-right"></i></a>
    </div>

    <div class="row row-cols-2 row-cols-md-4 g-3 mb-5">
        {% for product in featured_products %}
            <div class="col">
                <div class="product-card">
                    {% if product.seasonality == 'winter' %}
                        <div class="season-badge bg-info text-white" title="–ó–∏–º–∞"><i class="bi bi-snow"></i></div>
                    {% elif product.seasonality == 'summer' %}
                        <div class="season-badge bg-warning text-white" title="–õ—ñ—Ç–æ"><i class="bi bi-sun-fill"></i></div>
                    {% else %}
                        <div class="season-badge bg-success text-white" title="–í—Å–µ—Å–µ–∑–æ–Ω"><i class="bi bi-brightness-alt-high"></i></div>
                    {% endif %}

                    {% if product.stock_quantity > 4 %}
                        <div class="position-absolute top-0 start-0 m-2 badge bg-success bg-opacity-75 rounded-pill">–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</div>
                    {% elif product.stock_quantity > 0 %}
                        <div class="position-absolute top-0 start-0 m-2 badge bg-warning text-dark rounded-pill">–ó–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è</div>
                    {% endif %}

                    <a href="{% url 'store:product_detail' product.slug %}" class="text-decoration-none">
                        <img src="{{ product.photo_url|default:'https://placehold.co/400x400?text=No+Img' }}" 
                             class="product-img" loading="lazy" alt="{{ product.name }}"
                             onerror="this.src='{% static 'images/no-image.png' %}'">
                    </a>

                    <div class="mb-2">
                        <a href="{% url 'store:product_detail' product.slug %}" class="text-decoration-none text-dark fw-bold small d-block mb-1">
                            {{ product.brand.name }} {{ product.display_name }}
                        </a>
                        <div class="text-muted small" style="font-size: 0.85rem;">
                            {{ product.width }}/{{ product.profile }} R{{ product.diameter }}
                        </div>
                    </div>
                    
                    <div class="price-block d-flex align-items-end justify-content-between mt-auto">
                        <div>
                            {% if product.discount_percent > 0 %}
                                <div class="text-muted text-decoration-line-through small" style="font-size: 0.8rem;">{{ product.old_price }} ‚Ç¥</div>
                                <div class="text-danger fw-bold">{{ product.price }} ‚Ç¥</div>
                            {% else %}
                                <div class="fw-bold text-primary">{{ product.price }} ‚Ç¥</div>
                            {% endif %}
                        </div>
                        
                        {% if product.stock_quantity > 0 %}
                            <form action="{% url 'store:cart_add' product.id %}" method="post" class="ajax-cart-form" data-product-id="{{ product.id }}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-outline-primary rounded-circle" style="width: 38px; height: 38px;">
                                    <i class="bi bi-cart-plus"></i>
                                </button>
                            </form>
                        {% else %}
                            <button class="btn btn-sm btn-light rounded-circle text-muted" disabled><i class="bi bi-cart-x"></i></button>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <h2 class="h4 fw-bold text-center mb-4">–ù–∞—à—ñ –±—Ä–µ–Ω–¥–∏</h2>
    <div class="brands-scroller">
        {% for brand in brands %}
            <a href="{% url 'store:brand_landing' brand.slug %}" class="brand-pill">
                {% if brand.image %}
                    <img src="{{ brand.image.url }}" alt="{{ brand.name }}" style="max-height: 25px; max-width: 80px;">
                {% else %}
                    {{ brand.name }}
                {% endif %}
            </a>
        {% endfor %}
    </div>

    <div class="bg-light p-4 rounded-4 text-muted small mt-5 mb-5">
        <h2 class="h6 fw-bold text-dark mb-2">–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —à–∏–Ω R16.com.ua</h2>
        <p class="mb-2">–ú–∏ –ø—Ä–æ–ø–æ–Ω—É—î–º–æ —à–∏—Ä–æ–∫–∏–π –≤–∏–±—ñ—Ä –∞–≤—Ç–æ–º–æ–±—ñ–ª—å–Ω–æ—ó –≥—É–º–∏ –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ —Å–µ–∑–æ–Ω—É. –£ –Ω–∞—à–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ —à–∏–Ω–∏ –≤—ñ–¥ –ø—Ä–æ–≤—ñ–¥–Ω–∏—Ö —Å–≤—ñ—Ç–æ–≤–∏—Ö –±—Ä–µ–Ω–¥—ñ–≤.</p>
        <p class="mb-0">–ó–∞–º–æ–≤–ª—è–π—Ç–µ —à–∏–Ω–∏ –æ–Ω–ª–∞–π–Ω –∑ –¥–æ—Å—Ç–∞–≤–∫–æ—é –ø–æ –ö–∏—î–≤—É —Ç–∞ –£–∫—Ä–∞—ó–Ω—ñ. –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –ø—ñ–¥–±—ñ—Ä, –≥–∞—Ä–∞–Ω—Ç—ñ—è —è–∫–æ—Å—Ç—ñ —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ —Ü—ñ–Ω–∏.</p>
    </div>
</div>
{% endblock %}
